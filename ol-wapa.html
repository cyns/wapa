<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
<h1>Posinset and Setsize added to &lt;li&gt;</h1>
<h2>How to Demo me</h2>
<p>I only work in Edge on Windows 10 right now.  I'd love it if other browsers supported me too.</p>
<ul>
    <li>In Edge, go to about:flags and check “experimental accessibility features”</li>
    <li>Restart Edge</li>
    <li>Open https://rawgit.com/cyns/wapa/master/ol-wapa.html in Edge</li>
    <li>Start F12 tools</li>
    <li>Observe that neither list has any aria markup</li>
    <li>Start Narrator (Windows+Enter)</li>
    <li>CAPSLOCK+Right Arrow to get into and explore the page</li>
    <li>Observe that the second list now reads as “one of 100, two of 100, three of 100, 100 o 100” while the first list is still “1 of 4…4 of 4”.</li>
    <li>Switch to F12 window and observe that the second list now has aria markup.  The ARIA markup was added in response to the call from Narrator via UIA via the onariarequest javascript event handler.</li>
</ul>

<h2>Unordered List with no aria</h2>
    <ul>
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        ...
        <li>Item 100</li>

    </ul>

<h2>This one has a handler for onariarequest</h2>
<p>When there is a request from platform accessibiltiy API, this event gets fired, and the ARIA is connected at that time.  This script only runs if there is a request for ARIA values.</p>

    <ul id="listbox2" onariarequest="HandleRequest(event);">
        <li>Item 1</li>
        <li>Item 2</li>
        <li>Item 3</li>
        ...
        <li>Item 100</li>

    </ul>

    <script type="text/javascript">
        var firsttime = true;
        function HandleRequest(event) {
            var myList = document.getElementById('listbox2');
            var myItems = myList.children;
            if (firsttime) {
                for (var i = 0; i < myItems.length; i++) {
                    myItems[i].setAttribute("aria-posinset", i + 1);
                    myItems[i].setAttribute("aria-setsize", "100");
                }
                myItems[3].setAttribute("aria-posinset", "100"); //make the last one 100. 
                firsttime = false;
            }
        }

    </script>
</body>
</html>